---
aliases: []
confidence: 
created: 2025-06-26T04:04:48Z
epistemic: 
journal: Daily
journal-date: 2025-06-26
last_reviewed: 
modified: 2025-11-03T13:48:40Z
purpose: 
review_interval: 
see_also: []
source_of_truth: []
status: 
tags: []
title: 2025-06-26
type:
uid: 
updated: 
version:
---

```journal-nav

```

1. DONE - Somehow ensure the api server is not exposed
2. (TELEFONICA) Give Telefonica/CUH the external IP address (but still in the VNET) of the nginx controller
   1. **10.250.16.7** - this is the ip address to direct traffic to the APIs/UI -
3. (TELEFONICA) Ask Telefonica to create 2 DNS records for accessing the FITFILE application + argocd application given our internal load balancer IP address of our VNET.
   1. Can we ensure that the VNET can lookup this DNS?
4. (TELEFONICA) Figure out how FITFILE developers should access the box
   1. Should we deploy a bastion inside our VNET?
   2. Are they going to give us a machine?
5. (TELEFONICA) Can you give us the next hop ip address for us to direct outbound traffic from our VNET to?
6. (TELEFONICA) Is it ok for now, to progress with the deployment without redirecting outbound traffic through the CUH on premise networking?
7. We need to create a git tag called “cuh-prod-1-latest-release” so the node can track this release tag
   1. To configure in the terraform helm platform main.tf, and in the deployment repo values.yaml
8. Values.yaml needs to be assessed and configured with host

We have built a Private DNS Resolver in the FitFile subscription.  I have setup inbound and outbound endpoints.

The only additional piece of work is to create a Conditional Forwarder on the CUH on-prem DNS server.  

The Inbound Endpoint is:  inbound-ff-uks-gp-net (**10.250.16.52**)

I need to add a conditional forwarder to on-prem DNS to point at **10.250.16.52**

What is the domain name it needs to resolve in the FitFile Subscription.  Is it:    **privatelink.fitfile.net**

Once i know the details i can raise a change for it.

Based on the error message you've provided, it's not a single, specific Azure endpoint that is being blocked, but rather a failure of the Azure Kubernetes Service (AKS) nodes to establish required outbound connections to several critical Azure services. The error `VMExtensionError_OutBoundConnFail` indicates that the virtual machine extensions, which are essential for provisioning and configuring the AKS nodes, cannot "phone home" to their required endpoints.

The root of this problem lies in your network security configuration, which is preventing the necessary egress traffic from the AKS cluster's subnet. This is common when using custom virtual networks (V-Nets) with Network Security Groups (NSGs), Azure Firewall, or other third-party network virtual appliances that restrict outbound internet access.

To resolve this, you need to ensure that traffic is allowed to the fully qualified domain names (FQDNs) and IP addresses that AKS depends on. The specific endpoints are detailed in the official Microsoft documentation that the error message itself points to.
